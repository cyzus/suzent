"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[785],{3219(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"concepts/memory/api","title":"API Reference","description":"Complete API documentation.","source":"@site/../docs/02-concepts/memory/api.md","sourceDirName":"02-concepts/memory","slug":"/concepts/memory/api","permalink":"/suzent/docs/concepts/memory/api","draft":false,"unlisted":false,"editUrl":"https://github.com/cyzus/suzent/tree/main/website/../docs/02-concepts/memory/api.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Memory System","permalink":"/suzent/docs/concepts/memory/"},"next":{"title":"Architecture","permalink":"/suzent/docs/concepts/memory/architecture"}}');var o=t(4848),s=t(8453);const i={},a="API Reference",l={},c=[{value:"MemoryManager",id:"memorymanager",level:2},{value:"Initialization",id:"initialization",level:3},{value:"Core Memory",id:"core-memory",level:3},{value:"get_core_memory()",id:"get_core_memory",level:4},{value:"update_memory_block()",id:"update_memory_block",level:4},{value:"format_core_memory_for_context()",id:"format_core_memory_for_context",level:4},{value:"Archival Memory",id:"archival-memory",level:3},{value:"search_memories()",id:"search_memories",level:4},{value:"retrieve_relevant_memories()",id:"retrieve_relevant_memories",level:4},{value:"process_message_for_memories()",id:"process_message_for_memories",level:4},{value:"get_memory_stats()",id:"get_memory_stats",level:4},{value:"LanceDBMemoryStore",id:"lancedbmemorystore",level:2},{value:"Initialization",id:"initialization-1",level:3},{value:"Memory Blocks",id:"memory-blocks",level:3},{value:"get_all_memory_blocks()",id:"get_all_memory_blocks",level:4},{value:"set_memory_block()",id:"set_memory_block",level:4},{value:"Archival Memory",id:"archival-memory-1",level:3},{value:"add_memory()",id:"add_memory",level:4},{value:"update_memory()",id:"update_memory",level:4},{value:"delete_memory()",id:"delete_memory",level:4},{value:"delete_all_memories()",id:"delete_all_memories",level:4},{value:"Search",id:"search",level:3},{value:"semantic_search()",id:"semantic_search",level:4},{value:"hybrid_search()",id:"hybrid_search",level:4},{value:"Listing",id:"listing",level:3},{value:"list_memories()",id:"list_memories",level:4},{value:"get_memory_stats()",id:"get_memory_stats-1",level:4},{value:"get_memory_count()",id:"get_memory_count",level:4},{value:"Agent Tools",id:"agent-tools",level:2},{value:"MemorySearchTool",id:"memorysearchtool",level:3},{value:"MemoryBlockUpdateTool",id:"memoryblockupdatetool",level:3},{value:"Type Definitions",id:"type-definitions",level:2},{value:"Memory Dict",id:"memory-dict",level:3},{value:"Extraction Report",id:"extraction-report",level:3},{value:"Extracted Fact",id:"extracted-fact",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"api-reference",children:"API Reference"})}),"\n",(0,o.jsx)(n.p,{children:"Complete API documentation."}),"\n",(0,o.jsx)(n.h2,{id:"memorymanager",children:"MemoryManager"}),"\n",(0,o.jsx)(n.h3,{id:"initialization",children:"Initialization"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"MemoryManager(\n    store: PostgresMemoryStore,\n    embedding_model: str = None,\n    embedding_dimension: int = 0,\n    llm_for_extraction: Optional[str] = None\n)\n"})}),"\n",(0,o.jsx)(n.h3,{id:"core-memory",children:"Core Memory"}),"\n",(0,o.jsx)(n.h4,{id:"get_core_memory",children:"get_core_memory()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await manager.get_core_memory(\n    chat_id: Optional[str] = None,\n    user_id: Optional[str] = None\n) -> Dict[str, str]\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Returns: ",(0,o.jsx)(n.code,{children:"{'persona': '...', 'user': '...', 'facts': '...', 'context': '...'}"})]}),"\n",(0,o.jsx)(n.h4,{id:"update_memory_block",children:"update_memory_block()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await manager.update_memory_block(\n    label: str,  # 'persona', 'user', 'facts', 'context'\n    content: str,\n    chat_id: Optional[str] = None,\n    user_id: Optional[str] = None\n) -> bool\n"})}),"\n",(0,o.jsx)(n.h4,{id:"format_core_memory_for_context",children:"format_core_memory_for_context()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await manager.format_core_memory_for_context(\n    chat_id: Optional[str] = None,\n    user_id: Optional[str] = None\n) -> str\n"})}),"\n",(0,o.jsx)(n.p,{children:"Returns formatted string for system prompt."}),"\n",(0,o.jsx)(n.h3,{id:"archival-memory",children:"Archival Memory"}),"\n",(0,o.jsx)(n.h4,{id:"search_memories",children:"search_memories()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await manager.search_memories(\n    query: str,\n    limit: int = 10,\n    chat_id: Optional[str] = None,\n    user_id: Optional[str] = None,\n    use_hybrid: bool = True\n) -> List[Dict[str, Any]]\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Returns list of memory dicts with ",(0,o.jsx)(n.code,{children:"id"}),", ",(0,o.jsx)(n.code,{children:"content"}),", ",(0,o.jsx)(n.code,{children:"importance"}),", ",(0,o.jsx)(n.code,{children:"similarity"}),", ",(0,o.jsx)(n.code,{children:"created_at"}),", ",(0,o.jsx)(n.code,{children:"metadata"}),"."]}),"\n",(0,o.jsx)(n.h4,{id:"retrieve_relevant_memories",children:"retrieve_relevant_memories()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await manager.retrieve_relevant_memories(\n    query: str,\n    chat_id: Optional[str] = None,\n    user_id: Optional[str] = None,\n    limit: int = 5\n) -> str\n"})}),"\n",(0,o.jsx)(n.p,{children:"Returns formatted string with relevant memories or empty string."}),"\n",(0,o.jsx)(n.h4,{id:"process_message_for_memories",children:"process_message_for_memories()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await manager.process_message_for_memories(\n    message: Dict[str, Any],  # {'role': 'user', 'content': '...'}\n    chat_id: str,\n    user_id: str\n) -> Dict[str, Any]\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Returns: ",(0,o.jsx)(n.code,{children:"{'extracted_facts': [...], 'memories_created': [...], 'memories_updated': [...], 'conflicts_detected': [...]}"})]}),"\n",(0,o.jsx)(n.h4,{id:"get_memory_stats",children:"get_memory_stats()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await manager.get_memory_stats(user_id: str) -> Dict[str, Any]\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Returns: ",(0,o.jsx)(n.code,{children:"{'total_memories': int, 'user_id': str}"})]}),"\n",(0,o.jsx)(n.h2,{id:"lancedbmemorystore",children:"LanceDBMemoryStore"}),"\n",(0,o.jsx)(n.h3,{id:"initialization-1",children:"Initialization"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'LanceDBMemoryStore(\n    uri: str = ".suzent/data/memory",\n    embedding_dim: int = CONFIG.embedding_dimension\n)\nawait store.connect()\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"uri"}),": Path to LanceDB storage directory (default: ",(0,o.jsx)(n.code,{children:".suzent/data/memory"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"embedding_dim"}),": Dimension of embedding vectors (default: from CONFIG)"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"memory-blocks",children:"Memory Blocks"}),"\n",(0,o.jsx)(n.h4,{id:"get_all_memory_blocks",children:"get_all_memory_blocks()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await store.get_all_memory_blocks(\n    chat_id: Optional[str] = None,\n    user_id: Optional[str] = None\n) -> Dict[str, str]\n"})}),"\n",(0,o.jsx)(n.h4,{id:"set_memory_block",children:"set_memory_block()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await store.set_memory_block(\n    label: str,\n    content: str,\n    chat_id: Optional[str] = None,\n    user_id: Optional[str] = None\n) -> bool\n"})}),"\n",(0,o.jsx)(n.h3,{id:"archival-memory-1",children:"Archival Memory"}),"\n",(0,o.jsx)(n.h4,{id:"add_memory",children:"add_memory()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await store.add_memory(\n    content: str,\n    embedding: List[float],\n    user_id: str,\n    chat_id: Optional[str] = None,\n    metadata: Optional[Dict[str, Any]] = None,\n    importance: float = 0.5\n) -> str  # Returns memory ID\n"})}),"\n",(0,o.jsx)(n.h4,{id:"update_memory",children:"update_memory()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await store.update_memory(\n    memory_id: str,\n    content: Optional[str] = None,\n    embedding: Optional[List[float]] = None,\n    metadata: Optional[Dict[str, Any]] = None,\n    importance: Optional[float] = None\n) -> bool\n"})}),"\n",(0,o.jsx)(n.h4,{id:"delete_memory",children:"delete_memory()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await store.delete_memory(memory_id: str) -> bool\n"})}),"\n",(0,o.jsx)(n.h4,{id:"delete_all_memories",children:"delete_all_memories()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await store.delete_all_memories(\n    user_id: str,\n    chat_id: Optional[str] = None\n) -> int  # Returns count deleted\n"})}),"\n",(0,o.jsx)(n.h3,{id:"search",children:"Search"}),"\n",(0,o.jsx)(n.h4,{id:"semantic_search",children:"semantic_search()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await store.semantic_search(\n    query_embedding: List[float],\n    user_id: str,\n    limit: int = 10,\n    chat_id: Optional[str] = None,\n    min_importance: float = 0.0\n) -> List[Dict[str, Any]]\n"})}),"\n",(0,o.jsx)(n.h4,{id:"hybrid_search",children:"hybrid_search()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await store.hybrid_search(\n    query_embedding: List[float],\n    query_text: str,\n    user_id: str,\n    limit: int = 10,\n    chat_id: Optional[str] = None,\n    semantic_weight: float = 0.7,\n    fts_weight: float = 0.3,\n    recency_boost: float = 0.1,\n    importance_boost: float = 0.2\n) -> List[Dict[str, Any]]\n"})}),"\n",(0,o.jsx)(n.h3,{id:"listing",children:"Listing"}),"\n",(0,o.jsx)(n.h4,{id:"list_memories",children:"list_memories()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await store.list_memories(\n    user_id: str,\n    chat_id: Optional[str] = None,\n    limit: int = 20,\n    offset: int = 0,\n    order_by: str = 'created_at',  # or 'importance', 'access_count', 'accessed_at'\n    order_desc: bool = True\n) -> List[Dict[str, Any]]\n"})}),"\n",(0,o.jsx)(n.h4,{id:"get_memory_stats-1",children:"get_memory_stats()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await store.get_memory_stats(user_id: str) -> Dict[str, Any]\n"})}),"\n",(0,o.jsx)(n.p,{children:"Returns detailed statistics with importance distribution."}),"\n",(0,o.jsx)(n.h4,{id:"get_memory_count",children:"get_memory_count()"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"await store.get_memory_count(\n    user_id: str,\n    chat_id: Optional[str] = None\n) -> int\n"})}),"\n",(0,o.jsx)(n.h2,{id:"agent-tools",children:"Agent Tools"}),"\n",(0,o.jsx)(n.h3,{id:"memorysearchtool",children:"MemorySearchTool"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"MemorySearchTool(memory_manager: MemoryManager)\ntool.set_context(chat_id, user_id)\nresult = tool.forward(query: str, limit: int = 10) -> str\n"})}),"\n",(0,o.jsx)(n.p,{children:"Returns formatted string with search results."}),"\n",(0,o.jsx)(n.h3,{id:"memoryblockupdatetool",children:"MemoryBlockUpdateTool"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"MemoryBlockUpdateTool(memory_manager: MemoryManager)\ntool.set_context(chat_id, user_id)\nresult = tool.forward(\n    block: str,  # 'persona', 'user', 'facts', 'context'\n    operation: str,  # 'replace', 'append', 'search_replace'\n    content: str,\n    search_pattern: Optional[str] = None\n) -> str\n"})}),"\n",(0,o.jsx)(n.p,{children:"Returns success or error message."}),"\n",(0,o.jsx)(n.h2,{id:"type-definitions",children:"Type Definitions"}),"\n",(0,o.jsx)(n.h3,{id:"memory-dict",children:"Memory Dict"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"{\n    'id': UUID,\n    'content': str,\n    'embedding': List[float],\n    'metadata': Dict[str, Any],\n    'importance': float,\n    'created_at': datetime,\n    'updated_at': datetime,\n    'accessed_at': datetime,\n    'access_count': int,\n    'similarity': float,  # Search relevance\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"extraction-report",children:"Extraction Report"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"{\n    'extracted_facts': List[str],\n    'memories_created': List[str],  # Memory IDs\n    'memories_updated': List[str],\n    'conflicts_detected': List[Dict]\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"extracted-fact",children:"Extracted Fact"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"{\n    'content': str,\n    'category': str,  # personal, preference, goal, context, technical\n    'importance': float,  # 0.0-1.0\n    'tags': List[str]\n}\n"})})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>i,x:()=>a});var r=t(6540);const o={},s=r.createContext(o);function i(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);